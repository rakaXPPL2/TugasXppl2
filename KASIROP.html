<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kasir Supermarket - Tema One Piece</title>

  <!-- Font sederhana (bawaan) -->
  <style>
    :root{
      --accent: #f6b352; /* warna oranye/emas */
      --accent-dark: #d68a2a;
      --bg: #08121a; /* gelap */
      --panel: #0f2a34;
      --muted: #cfe7e9;
      --glass: rgba(255,255,255,0.03);
      /* Ganti nilai ini dengan URL gambar One Piece Anda (direct image link)
         contoh: --bg-image: url('https://example.com/onepiece.jpg'); */
      --bg-image: url('https://down-id.img.susercontent.com/file/id-11134207-7r98p-luwwwx8kh6t8e8'); 
    }

    html,body{
      height:100%;
      margin:0;
      font-family: Inter, "Segoe UI", Roboto, system-ui, sans-serif;
      background:
        linear-gradient(180deg, rgba(2,6,23,0.85), rgba(4,10,21,0.95)),
        var(--bg-image);
      background-size: cover;
      background-position: center;
      color:var(--muted);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* layout */
    .app{
      display:grid;
      grid-template-columns: 420px 1fr 360px;
      gap:18px;
      padding:20px;
      height:100vh;
      box-sizing:border-box;
      align-items:start;
    }

    header{
      grid-column:1/-1;
      display:flex;
      align-items:center;
      gap:16px;
      padding:14px 20px;
      background:linear-gradient(90deg, rgba(246,179,82,0.08), rgba(214,138,42,0.04));
      border-radius:12px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.45);
      margin-bottom:6px;
      border: 1px solid rgba(255,255,255,0.03);
    }

    header .logo{
      width:84px;
      height:84px;
      flex:0 0 84px;
      border-radius:10px;
      overflow:hidden;
      background:linear-gradient(45deg, rgba(246,179,82,0.18), rgba(214,138,42,0.12));
      display:flex;
      align-items:center;
      justify-content:center;
      border:1px solid rgba(255,255,255,0.04);
    }
    header .logo img{
      width:100%;
      height:100%;
      object-fit:cover;
    }

    header h1{
      font-size:20px;
      margin:0;
      color:#fff;
      letter-spacing:0.6px;
    }
    header p { margin:0.2rem 0 0; color:#dbeff1; font-size:13px; opacity:0.9; }

    /* sidebar produk */
    .panel{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.015));
      border-radius:12px;
      padding:12px;
      border:1px solid rgba(255,255,255,0.03);
      box-shadow: 0 6px 14px rgba(0,0,0,0.45);
    }

    .products{
      display:flex;
      flex-direction:column;
      gap:10px;
      max-height: calc(100vh - 190px);
      overflow:auto;
      padding-right:6px;
    }

    .prod{
      display:flex;
      gap:10px;
      align-items:center;
      padding:8px;
      background:var(--glass);
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.02);
    }
    .prod img{ width:56px; height:48px; object-fit:cover; border-radius:6px; flex:0 0 56px; }
    .prod .meta{ flex:1; }
    .prod .meta .name{ font-weight:600; color:#fff; font-size:14px; }
    .prod .meta .price{ font-size:13px; color:#dbeff1; opacity:0.9; }
    .prod button{ background:var(--accent); border:none; padding:8px 10px; border-radius:8px; cursor:pointer; color:#08121a; font-weight:700; }

    /* tengah: area input manual + daftar keranjang */
    .center{
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .add-form{
      display:flex;
      gap:10px;
      align-items:center;
    }
    .add-form input, .add-form select{
      padding:8px 10px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.04);
      background:transparent;
      color:var(--muted);
      outline:none;
    }
    .add-form button{
      background:transparent;
      border:1px solid var(--accent);
      color:var(--accent);
      padding:8px 12px;
      border-radius:8px;
      cursor:pointer;
      font-weight:700;
    }

    .cart{
      margin-top:6px;
      background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
      padding:12px;
      border-radius:10px;
      flex:1;
      overflow:auto;
    }

    .cart table{
      width:100%;
      border-collapse:collapse;
      color:var(--muted);
    }
    .cart th, .cart td{ text-align:left; padding:8px; font-size:13px; border-bottom:1px dashed rgba(255,255,255,0.02); }
    .qty-input{ width:62px; padding:6px; border-radius:6px; background:transparent; border:1px solid rgba(255,255,255,0.03); color:var(--muted); }

    /* kanan: pembayaran */
    .checkout{
      display:flex;
      flex-direction:column;
      gap:12px;
      position:relative;
    }
    .totals{
      padding:12px;
      border-radius:10px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.03);
    }
    .totals .line{ display:flex; justify-content:space-between; padding:8px 0; font-weight:600; }
    .totals .big{ font-size:20px; color:var(--accent); }

    .pay-section input{
      width:100%;
      padding:10px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.04);
      background:transparent;
      color:var(--muted);
      margin-bottom:8px;
    }
    .pay-section button{
      width:100%;
      padding:10px;
      border-radius:10px;
      border:none;
      background:var(--accent);
      color:#08121a;
      font-weight:800;
      cursor:pointer;
      box-shadow: 0 8px 18px rgba(214,138,42,0.14);
    }

    /* footer kecil */
    footer.app-footer{
      grid-column:1/-1;
      text-align:center;
      margin-top:8px;
      color:#9cc7c9;
      font-size:13px;
      opacity:0.9;
    }

    /* responsive */
    @media (max-width:1000px){
      .app{ grid-template-columns: 1fr; padding:12px; }
      header{ flex-direction:column; align-items:flex-start; gap:8px; }
      .center{ order:2; }
      .checkout{ order:3; }
      .products{ max-height:260px; }
    }
  </style>
</head>
<body>

  <div style="max-width:1200px;margin:12px auto;">
    <header>
      <div class="logo">
        <!-- Ganti src di bawah dengan direct image URL One Piece jika ingin -->
        <img id="logoImg" src="" alt="OnePiece" onerror="this.style.display='none'">
      </div>
      <div>
        <h1>Kasir Supermarket - Tema One Piece</h1>
        <p>Antarmuka kasir sederhana. Tambah produk cepat, hitung pajak, cetak struk.</p>
      </div>
    </header>

    <div class="app">
      <!-- daftar produk -->
      <aside class="panel">
        <h3 style="margin:4px 0 10px;color:#fff">Daftar Produk</h3>

        <!-- form untuk menambah produk custom ke daftar -->
        <div style="display:flex;gap:8px;margin-bottom:10px;">
          <input id="newName" placeholder="Nama produk" style="flex:1" />
          <input id="newPrice" placeholder="Harga" style="width:100px" />
          <button onclick="addCatalogProduct()">Tambah</button>
        </div>

        <div class="products" id="productList">
          <!-- produk akan di-render di sini -->
        </div>
      </aside>

      <!-- center: input & keranjang -->
      <main class="center">
        <div class="panel">
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <h3 style="margin:0;color:#fff">Input Cepat</h3>
            <small style="color:#cdeeee">Pilih produk atau input manual</small>
          </div>

          <div class="add-form" style="margin-top:10px;">
            <select id="prodSelect" style="min-width:200px;">
              <!-- options -->
            </select>
            <input id="qty" type="number" min="1" value="1" style="width:80px" />
            <button onclick="addToCart()">Tambah ke Keranjang</button>
          </div>
        </div>

        <div class="cart panel" id="cartPanel">
          <h3 style="margin-top:0;color:#fff">Keranjang</h3>
          <table id="cartTable">
            <thead>
              <tr><th>Produk</th><th>Qty</th><th>Harga</th><th>Subtotal</th><th></th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </main>

      <!-- kanan: pembayaran -->
      <aside class="panel checkout">
        <h3 style="margin:0;color:#fff">Pembayaran</h3>

        <div class="totals">
          <div class="line"><div>Subtotal</div><div id="subtotal">Rp 0</div></div>
          <div class="line"><div>Pajak (10%)</div><div id="tax">Rp 0</div></div>
          <div class="line"><div>Diskon</div><div><input id="discount" placeholder="0" style="width:100px"></div></div>
          <div class="line big"><div>Total</div><div id="total">Rp 0</div></div>
        </div>

        <div class="pay-section">
          <input id="tendered" placeholder="Jumlah bayar (mis. 50000)" />
          <button onclick="pay()">Bayar & Cetak Struk</button>
          <div id="changeBox" style="margin-top:8px; font-weight:700;"></div>
        </div>

        <div style="font-size:12px;opacity:0.9;margin-top:auto;color:#cfe7e9">
          Tips: klik tombol X pada baris keranjang untuk hapus. Gunakan diskon dalam angka (mis. 5000).
        </div>
      </aside>
    </div>

    <footer class="app-footer">Tema visual terinspirasi One Piece — gambar harus Anda sediakan/tautan sendiri. © Kasir OnePiece</footer>
  </div>

  <!-- Receipt (hidden) -->
  <div id="receipt" style="display:none;white-space:pre-wrap;font-family:monospace;"></div>

  <script>
    // Simple catalog (sample)
    const catalog = [
      { id: 'p01', name: 'Beras 5kg', price: 75000, img: '' },
      { id: 'p02', name: 'Minyak Goreng 2L', price: 28000, img: '' },
      { id: 'p03', name: 'Gula 1kg', price: 14000, img: '' },
      { id: 'p04', name: 'Susu UHT', price: 12000, img: '' },
      { id: 'p05', name: 'Roti Tawar', price: 9000, img: '' }
    ];

    const cart = [];

    function rupiah(n){
      return 'Rp ' + n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    }

    // render daftar produk
    function renderCatalog(){
      const list = document.getElementById('productList');
      list.innerHTML = '';
      const sel = document.getElementById('prodSelect');
      sel.innerHTML = '';
      catalog.forEach(p=>{
        const row = document.createElement('div');
        row.className = 'prod';
        row.innerHTML = `
          <img src="${p.img||''}" onerror="this.style.display='none'">
          <div class="meta">
            <div class="name">${p.name}</div>
            <div class="price">${rupiah(p.price)}</div>
          </div>
          <button onclick="quickAdd('${p.id}')">Tambah</button>
        `;
        list.appendChild(row);

        const opt = document.createElement('option');
        opt.value = p.id;
        opt.textContent = p.name + ' — ' + rupiah(p.price);
        sel.appendChild(opt);
      });
    }

    function addCatalogProduct(){
      const n = document.getElementById('newName').value.trim();
      const p = parseInt(document.getElementById('newPrice').value || 0);
      if(!n || !p){ alert('Isi nama dan harga yang benar'); return; }
      const id = 'p' + Math.floor(Math.random()*100000);
      catalog.push({ id, name:n, price:p, img:''});
      document.getElementById('newName').value='';
      document.getElementById('newPrice').value='';
      renderCatalog();
    }

    function quickAdd(id){
      document.getElementById('prodSelect').value = id;
      document.getElementById('qty').value = 1;
      addToCart();
    }

    function addToCart(){
      const sel = document.getElementById('prodSelect').value;
      const qty = Math.max(1, parseInt(document.getElementById('qty').value || 1));
      const prod = catalog.find(x=>x.id===sel);
      if(!prod) return;
      const inCart = cart.find(x=>x.id===prod.id);
      if(inCart) inCart.qty += qty;
      else cart.push({ id: prod.id, name: prod.name, price: prod.price, qty });
      renderCart();
    }

    function renderCart(){
      const tbody = document.querySelector('#cartTable tbody');
      tbody.innerHTML='';
      cart.forEach((c,i)=>{
        const tr = document.createElement('tr');
        const subtotal = c.price * c.qty;
        tr.innerHTML = `
          <td>${c.name}</td>
          <td><input class="qty-input" type="number" min="1" value="${c.qty}" onchange="updateQty(${i}, this.value)"></td>
          <td>${rupiah(c.price)}</td>
          <td>${rupiah(subtotal)}</td>
          <td><button onclick="removeItem(${i})" style="background:transparent;border:0;color:#f88;cursor:pointer">X</button></td>
        `;
        tbody.appendChild(tr);
      });
      updateTotals();
    }

    function updateQty(index, val){
      const v = Math.max(1, parseInt(val||1));
      cart[index].qty = v;
      renderCart();
    }
    function removeItem(index){
      cart.splice(index,1);
      renderCart();
    }

    function calcSubtotal(){
      return cart.reduce((s,i)=> s + i.price * i.qty, 0);
    }

    function updateTotals(){
      const subtotal = calcSubtotal();
      const tax = Math.round(subtotal * 0.10); // 10%
      const discount = parseInt(document.getElementById('discount').value || 0);
      const total = Math.max(0, subtotal + tax - (isNaN(discount) ? 0 : discount));
      document.getElementById('subtotal').textContent = rupiah(subtotal);
      document.getElementById('tax').textContent = rupiah(tax);
      document.getElementById('total').textContent = rupiah(total);
    }

    document.getElementById('discount').addEventListener('input', updateTotals);

    function coli(){
      const totalText = document.getElementById('total').textContent;
      const totalNum = parseInt((document.getElementById('total').textContent || 'Rp 0').replace(/[^0-9]/g, '')) || 0;
      if(totalNum <= 0){ alert('Keranjang kosong atau total 0'); return; }
      const paid = parseInt(document.getElementById('tendered').value || 0);
      if(isNaN(paid) || paid < totalNum){ alert('Jumlah bayar tidak cukup'); return; }
      const change = paid - totalNum;
      document.getElementById('changeBox').textContent = 'Kembalian: ' + rupiah(change);

      // buat struk teks
      const now = new Date();
      let receipt = `=== STRUK PEMBELIAN ===\nToko: Kasir OnePiece\nTanggal: ${now.toLocaleString()}\n-----------------------------\n`;
      cart.forEach(it=>{
        receipt += `${it.name} x${it.qty}  ${rupiah(it.price * it.qty)}\n`;
      });
      receipt += `-----------------------------\nSubtotal: ${document.getElementById('subtotal').textContent}\nPajak: ${document.getElementById('tax').textContent}\nDiskon: Rp ${document.getElementById('discount').value || 0}\nTOTAL: ${document.getElementById('total').textContent}\nDibayar: ${rupiah(paid)}\nKembalian: ${rupiah(change)}\n=============================\nTerima kasih! Selamat berbelanja!\n`;
      // tampilkan print dialog
      const w = window.open('', 'PRINT', 'height=600,width=400');
      w.document.write('<pre style="font-family:monospace;">' + receipt + '</pre>');
      w.document.close();
      w.focus();
      w.print();
      // reset
      cart.length = 0;
      renderCart();
      document.getElementById('tendered').value='';
      document.getElementById('discount').value='';
      document.getElementById('changeBox').textContent='';
    }

    // init
    renderCatalog();
    renderCart();

    // OPTIONAL: jika Anda punya direct image URL, masukkan di sini agar tampil di logo/header
    // contoh: setLogoImage('https://.../onepiece.jpg');
    function setLogoImage(''https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSIPmeLs01Hw0gSsKK8s1dT2oyAEtrMjXoFwIdy_IzmGoXreAY46XKCH4XWOK9uzjW3pmg&usqp=CAU'');
      if(!url) return;
      document.getElementById('logoImg').src = url;
      document.documentElement.style.setProperty('--bg-image', `url('${url}')`);
    }

    // Jika Anda ingin, masukkan contoh default (kosong sekarang)
    // setLogoImage('https://example.com/onepiece.jpg');
  </script>
</body>
</html>
